CCS PCH C Compiler, Version 4.140, 21898               29-jul-13 14:51

               Filename:   E:\Eletronica\Projetos\Calendario\calendario.lst

               ROM used:   3232 bytes (10%)
                           Largest free fragment is 29536
               RAM used:   26 (2%) at main() level
                           46 (3%) worst case
               Stack:     5 locations

*
0000:  GOTO   0A0A
.................... ///* 
.................... // * calendario.c 
.................... // * 
.................... // *  Created on: 02/02/2012 
.................... // *      Author: cuki 
.................... // */ 
....................  
.................... #include<18F452.h> 
.................... //////// Standard Header file for the PIC18F452 device //////////////// 
.................... #device PIC18F452 
.................... #list 
....................  
....................  
.................... #fuses H4 
.................... #use delay (crystal=10MHz, clock=40MHz) 
*
0120:  CLRF   FEA
0122:  MOVLW  24
0124:  MOVWF  FE9
0126:  MOVF   FEF,W
0128:  BZ    0146
012A:  MOVLW  0C
012C:  MOVWF  01
012E:  CLRF   00
0130:  DECFSZ 00,F
0132:  BRA    0130
0134:  DECFSZ 01,F
0136:  BRA    012E
0138:  MOVLW  F7
013A:  MOVWF  00
013C:  DECFSZ 00,F
013E:  BRA    013C
0140:  BRA    0142
0142:  DECFSZ FEF,F
0144:  BRA    012A
0146:  RETURN 0
*
0182:  MOVLW  02
0184:  SUBWF  24,F
0186:  BNC   019E
0188:  CLRF   FEA
018A:  MOVLW  24
018C:  MOVWF  FE9
018E:  MOVF   FEF,W
0190:  BZ    019E
0192:  MOVLW  02
0194:  MOVWF  00
0196:  DECFSZ 00,F
0198:  BRA    0196
019A:  DECFSZ FEF,F
019C:  BRA    0192
019E:  GOTO   01B8 (RETURN)
.................... //#use rs232(baud=9600,xmit=PIN_C6,rcv=PIN_C7) 
.................... #use i2c(master, sda=PIN_C4, scl=PIN_C3, fast=50000) 
*
0244:  MOVLW  08
0246:  MOVWF  01
0248:  MOVLW  1E
024A:  MOVWF  00
024C:  DECFSZ 00,F
024E:  BRA    024C
0250:  BCF    F8B.3
0252:  BCF    F94.3
0254:  MOVLW  1F
0256:  MOVWF  00
0258:  DECFSZ 00,F
025A:  BRA    0258
025C:  RLCF   24,F
025E:  BCF    F8B.4
0260:  BTFSC  FD8.0
0262:  BSF    F94.4
0264:  BTFSS  FD8.0
0266:  BCF    F94.4
0268:  BSF    F94.3
026A:  BTFSS  F82.3
026C:  BRA    026A
026E:  DECFSZ 01,F
0270:  BRA    0248
0272:  MOVLW  1E
0274:  MOVWF  00
0276:  DECFSZ 00,F
0278:  BRA    0276
027A:  BCF    F8B.3
027C:  BCF    F94.3
027E:  NOP   
0280:  BSF    F94.4
0282:  MOVLW  1F
0284:  MOVWF  00
0286:  DECFSZ 00,F
0288:  BRA    0286
028A:  MOVLW  1F
028C:  MOVWF  00
028E:  DECFSZ 00,F
0290:  BRA    028E
0292:  BSF    F94.3
0294:  BTFSS  F82.3
0296:  BRA    0294
0298:  CLRF   01
029A:  MOVLW  1F
029C:  MOVWF  00
029E:  DECFSZ 00,F
02A0:  BRA    029E
02A2:  BTFSC  F82.4
02A4:  BSF    01.0
02A6:  BCF    F8B.3
02A8:  BCF    F94.3
02AA:  BCF    F8B.4
02AC:  BCF    F94.4
02AE:  RETURN 0
02B0:  MOVLW  08
02B2:  MOVWF  25
02B4:  MOVFF  00,26
02B8:  BSF    F94.4
02BA:  MOVLW  1F
02BC:  MOVWF  00
02BE:  DECFSZ 00,F
02C0:  BRA    02BE
02C2:  BSF    F94.3
02C4:  BTFSS  F82.3
02C6:  BRA    02C4
02C8:  BTFSC  F82.4
02CA:  BSF    FD8.0
02CC:  BTFSS  F82.4
02CE:  BCF    FD8.0
02D0:  RLCF   01,F
02D2:  MOVLW  1E
02D4:  MOVWF  00
02D6:  DECFSZ 00,F
02D8:  BRA    02D6
02DA:  BCF    F94.3
02DC:  BCF    F8B.3
02DE:  DECFSZ 25,F
02E0:  BRA    02B8
02E2:  BSF    F94.4
02E4:  MOVLW  1F
02E6:  MOVWF  00
02E8:  DECFSZ 00,F
02EA:  BRA    02E8
02EC:  BCF    F8B.4
02EE:  MOVF   26,W
02F0:  BTFSS  FD8.2
02F2:  BCF    F94.4
02F4:  NOP   
02F6:  BSF    F94.3
02F8:  BTFSS  F82.3
02FA:  BRA    02F8
02FC:  MOVLW  1E
02FE:  MOVWF  00
0300:  DECFSZ 00,F
0302:  BRA    0300
0304:  BCF    F8B.3
0306:  BCF    F94.3
0308:  MOVLW  1F
030A:  MOVWF  00
030C:  DECFSZ 00,F
030E:  BRA    030C
0310:  BCF    F8B.4
0312:  BCF    F94.4
0314:  GOTO   037A (RETURN)
....................  
.................... #include"calendario.h" 
.................... /* 
....................  * calendario.h 
....................  * 
....................  *  Created on: 26/07/2013 
....................  *      Author: cuki 
....................  */ 
....................  
.................... #ifndef CALENDARIO_H_ 
.................... #define CALENDARIO_H_ 
....................  
.................... #define DS1307		0xD0 
.................... #define sec_addr	0x00 
.................... #define min_addr	0x01 
.................... #define hour_addr	0x02 
.................... #define dow_addr	0x03 
.................... #define date_addr	0x04 
.................... #define month_addr	0x05 
.................... #define year_addr	0x06 
.................... #define ctlr_addr	0x07 
.................... #define debounce 	100 
....................  
.................... enum { 
.................... 	dom = 1, seg, ter, qua, qui, sex, sab 
.................... }; 
....................  
.................... struct cal { 
.................... 	short am_pm, _12h; 
.................... 	int segundos, minutos, horas, dow, dia, mes, ano; 
.................... }; 
....................  
.................... int decToBcd(int val) { 
.................... 	return ((val / 10 * 16) + (val % 10)); 
.................... } 
....................  
.................... int bcdToDec(int val) { 
.................... 	return ((val / 16 * 10) + (val % 16)); 
.................... } 
....................  
.................... int getReg(int addr) { 
.................... 	int leitura; 
....................  
.................... 	i2c_start(); 
0318:  BSF    F94.4
031A:  MOVLW  1E
031C:  MOVWF  00
031E:  DECFSZ 00,F
0320:  BRA    031E
0322:  BSF    F94.3
0324:  MOVLW  1F
0326:  MOVWF  00
0328:  DECFSZ 00,F
032A:  BRA    0328
032C:  BCF    F8B.4
032E:  BCF    F94.4
0330:  MOVLW  1E
0332:  MOVWF  00
0334:  DECFSZ 00,F
0336:  BRA    0334
0338:  BCF    F8B.3
033A:  BCF    F94.3
.................... 	i2c_write(DS1307); 
033C:  MOVLW  D0
033E:  MOVWF  24
0340:  RCALL  0244
.................... 	i2c_write(addr); 
0342:  MOVFF  22,24
0346:  RCALL  0244
.................... 	i2c_start(); 
0348:  BSF    F94.4
034A:  MOVLW  1E
034C:  MOVWF  00
034E:  DECFSZ 00,F
0350:  BRA    034E
0352:  BSF    F94.3
0354:  MOVLW  1F
0356:  MOVWF  00
0358:  DECFSZ 00,F
035A:  BRA    0358
035C:  BTFSS  F82.3
035E:  BRA    035C
0360:  BCF    F8B.4
0362:  BCF    F94.4
0364:  MOVLW  1E
0366:  MOVWF  00
0368:  DECFSZ 00,F
036A:  BRA    0368
036C:  BCF    F8B.3
036E:  BCF    F94.3
.................... 	i2c_write(DS1307 + 1); 
0370:  MOVLW  D1
0372:  MOVWF  24
0374:  RCALL  0244
.................... 	leitura = i2c_read(0); 
0376:  CLRF   00
0378:  BRA    02B0
037A:  MOVFF  01,23
.................... 	i2c_stop(); 
037E:  BCF    F94.4
0380:  NOP   
0382:  BSF    F94.3
0384:  BTFSS  F82.3
0386:  BRA    0384
0388:  MOVLW  1E
038A:  MOVWF  00
038C:  DECFSZ 00,F
038E:  BRA    038C
0390:  BRA    0392
0392:  NOP   
0394:  BSF    F94.4
0396:  MOVLW  1E
0398:  MOVWF  00
039A:  DECFSZ 00,F
039C:  BRA    039A
....................  
.................... 	return leitura; 
039E:  MOVFF  23,01
.................... } 
03A2:  RETURN 0
....................  
.................... void writeReg(int addr, int dado) { 
.................... 	i2c_start(); 
03A4:  BSF    F94.4
03A6:  MOVLW  1E
03A8:  MOVWF  00
03AA:  DECFSZ 00,F
03AC:  BRA    03AA
03AE:  BSF    F94.3
03B0:  MOVLW  1F
03B2:  MOVWF  00
03B4:  DECFSZ 00,F
03B6:  BRA    03B4
03B8:  BCF    F8B.4
03BA:  BCF    F94.4
03BC:  MOVLW  1E
03BE:  MOVWF  00
03C0:  DECFSZ 00,F
03C2:  BRA    03C0
03C4:  BCF    F8B.3
03C6:  BCF    F94.3
.................... 	i2c_write(DS1307); 
03C8:  MOVLW  D0
03CA:  MOVWF  24
03CC:  RCALL  0244
.................... 	i2c_write(addr); 
03CE:  MOVFF  1B,24
03D2:  RCALL  0244
.................... 	i2c_write(dado); 
03D4:  MOVFF  1C,24
03D8:  RCALL  0244
.................... 	i2c_stop(); 
03DA:  BCF    F94.4
03DC:  NOP   
03DE:  BSF    F94.3
03E0:  BTFSS  F82.3
03E2:  BRA    03E0
03E4:  MOVLW  1E
03E6:  MOVWF  00
03E8:  DECFSZ 00,F
03EA:  BRA    03E8
03EC:  BRA    03EE
03EE:  NOP   
03F0:  BSF    F94.4
03F2:  MOVLW  1E
03F4:  MOVWF  00
03F6:  DECFSZ 00,F
03F8:  BRA    03F6
.................... } 
03FA:  RETURN 0
....................  
.................... void pause(void) { 
.................... 	int aux; 
....................  
.................... 	aux = getReg(sec_addr); 
.................... 	if (!bit_test(aux, 7)) 
.................... 		aux |= 0x80; 
.................... 	else 
.................... 		aux &= 0x7F; 
.................... 	writeReg(sec_addr, aux); 
.................... } 
....................  
.................... int toSec(int in) { 
.................... 	int lsb, msb; 
....................  
.................... 	lsb = in & 0x0F; 
*
0610:  MOVF   1D,W
0612:  ANDLW  0F
0614:  MOVWF  1E
.................... 	msb = (in & 0x70) >> 4; 
0616:  MOVF   1D,W
0618:  ANDLW  70
061A:  MOVWF  00
061C:  SWAPF  00,W
061E:  MOVWF  1F
0620:  MOVLW  0F
0622:  ANDWF  1F,F
....................  
.................... 	return 10 * msb + lsb; 
0624:  MOVF   1F,W
0626:  MULLW  0A
0628:  MOVF   FF3,W
062A:  ADDWF  1E,W
062C:  MOVWF  01
.................... } 
062E:  RETURN 0
....................  
.................... int toHour(int in, short *AM_PM, short *formato) { 
.................... 	int msb, lsb; 
....................  
.................... 	*formato = bit_test(in, 6); 
*
065A:  MOVFF  28,FE9
065E:  MOVFF  29,FEA
0662:  MOVLW  00
0664:  BTFSC  25.6
0666:  MOVLW  01
0668:  MOVWF  FEF
.................... 	if (*formato) { 
066A:  MOVFF  29,03
066E:  MOVFF  28,FE9
0672:  MOVFF  29,FEA
0676:  MOVF   FEF,F
0678:  BZ    069A
.................... 		msb = (in & 0x10) >> 4; 
067A:  MOVF   25,W
067C:  ANDLW  10
067E:  MOVWF  00
0680:  SWAPF  00,W
0682:  MOVWF  2A
0684:  MOVLW  0F
0686:  ANDWF  2A,F
.................... 		*AM_PM = bit_test(in, 5); 
0688:  MOVFF  26,FE9
068C:  MOVFF  27,FEA
0690:  MOVLW  00
0692:  BTFSC  25.5
0694:  MOVLW  01
0696:  MOVWF  FEF
.................... 	} else { 
0698:  BRA    06A8
.................... 		msb = (in & 0x30) >> 4; 
069A:  MOVF   25,W
069C:  ANDLW  30
069E:  MOVWF  00
06A0:  SWAPF  00,W
06A2:  MOVWF  2A
06A4:  MOVLW  0F
06A6:  ANDWF  2A,F
.................... 	} 
.................... 	lsb = in & 0x0F; 
06A8:  MOVF   25,W
06AA:  ANDLW  0F
06AC:  MOVWF  2B
....................  
.................... 	return 10 * msb + lsb; 
06AE:  MOVF   2A,W
06B0:  MULLW  0A
06B2:  MOVF   FF3,W
06B4:  ADDWF  2B,W
06B6:  MOVWF  01
.................... } 
06B8:  GOTO   06F8 (RETURN)
....................  
.................... int toDate(int in) { 
.................... 	int msb, lsb; 
....................  
.................... 	lsb = in & 0x0F; 
*
070E:  MOVF   1D,W
0710:  ANDLW  0F
0712:  MOVWF  1F
.................... 	msb = (in & 0x30) >> 4; 
0714:  MOVF   1D,W
0716:  ANDLW  30
0718:  MOVWF  00
071A:  SWAPF  00,W
071C:  MOVWF  1E
071E:  MOVLW  0F
0720:  ANDWF  1E,F
....................  
.................... 	return msb * 10 + lsb; 
0722:  MOVF   1E,W
0724:  MULLW  0A
0726:  MOVF   FF3,W
0728:  ADDWF  1F,W
072A:  MOVWF  01
.................... } 
072C:  GOTO   0740 (RETURN)
....................  
.................... int toMonth(int in) { 
.................... 	int lsb, msb; 
....................  
.................... 	lsb = in & 0x0F; 
*
0746:  MOVF   1D,W
0748:  ANDLW  0F
074A:  MOVWF  1E
.................... 	msb = (in & 0x10) >> 4; 
074C:  MOVF   1D,W
074E:  ANDLW  10
0750:  MOVWF  00
0752:  SWAPF  00,W
0754:  MOVWF  1F
0756:  MOVLW  0F
0758:  ANDWF  1F,F
....................  
.................... 	return msb * 10 + lsb; 
075A:  MOVF   1F,W
075C:  MULLW  0A
075E:  MOVF   FF3,W
0760:  ADDWF  1E,W
0762:  MOVWF  01
.................... } 
0764:  GOTO   0778 (RETURN)
....................  
.................... int toYear(int in) { 
.................... 	int lsb, msb; 
....................  
.................... 	lsb = in & 0x0F; 
*
077E:  MOVF   1D,W
0780:  ANDLW  0F
0782:  MOVWF  1E
.................... 	msb = (in & 0xF0) >> 4; 
0784:  MOVF   1D,W
0786:  ANDLW  F0
0788:  MOVWF  00
078A:  SWAPF  00,W
078C:  MOVWF  1F
078E:  MOVLW  0F
0790:  ANDWF  1F,F
....................  
.................... 	return msb * 10 + lsb; 
0792:  MOVF   1F,W
0794:  MULLW  0A
0796:  MOVF   FF3,W
0798:  ADDWF  1E,W
079A:  MOVWF  01
.................... } 
079C:  GOTO   07B0 (RETURN)
....................  
.................... int getSec(void) { 
.................... 	return toSec(getReg(sec_addr)); 
*
0630:  CLRF   22
0632:  RCALL  0318
0634:  MOVFF  01,1C
0638:  MOVFF  01,1D
063C:  RCALL  0610
063E:  MOVF   01,W
.................... } 
0640:  GOTO   07CA (RETURN)
....................  
.................... int getMin(void) { 
.................... 	return toSec(getReg(min_addr)); 
0644:  MOVLW  01
0646:  MOVWF  22
0648:  RCALL  0318
064A:  MOVFF  01,1C
064E:  MOVFF  01,1D
0652:  RCALL  0610
0654:  MOVF   01,W
.................... } 
0656:  GOTO   07EA (RETURN)
....................  
.................... int getHour(short *AM_PM, short *formato) { 
.................... 	return toHour(getReg(hour_addr), *AM_PM, *formato); 
*
06BC:  MOVLW  02
06BE:  MOVWF  22
06C0:  RCALL  0318
06C2:  MOVFF  01,22
06C6:  MOVFF  1F,03
06CA:  MOVFF  1E,FE9
06CE:  MOVFF  1F,FEA
06D2:  MOVFF  FEF,23
06D6:  MOVFF  21,03
06DA:  MOVFF  20,FE9
06DE:  MOVFF  21,FEA
06E2:  MOVFF  FEF,24
06E6:  MOVFF  01,25
06EA:  CLRF   27
06EC:  MOVFF  23,26
06F0:  CLRF   29
06F2:  MOVFF  24,28
06F6:  BRA    065A
06F8:  MOVF   01,W
.................... } 
06FA:  GOTO   0824 (RETURN)
....................  
.................... int getDayOfWeek(void) { 
.................... 	return getReg(dow_addr) & 0x07; 
06FE:  MOVLW  03
0700:  MOVWF  22
0702:  RCALL  0318
0704:  MOVF   01,W
0706:  ANDLW  07
0708:  MOVWF  01
.................... } 
070A:  GOTO   0844 (RETURN)
....................  
.................... int getDate(void) { 
.................... 	return toDate(getReg(date_addr)); 
*
0730:  MOVLW  04
0732:  MOVWF  22
0734:  RCALL  0318
0736:  MOVFF  01,1C
073A:  MOVFF  01,1D
073E:  BRA    070E
0740:  MOVF   01,W
.................... } 
0742:  GOTO   0864 (RETURN)
....................  
.................... int getMonth(void) { 
.................... 	return toMonth(getReg(month_addr)); 
*
0768:  MOVLW  05
076A:  MOVWF  22
076C:  RCALL  0318
076E:  MOVFF  01,1C
0772:  MOVFF  01,1D
0776:  BRA    0746
0778:  MOVF   01,W
.................... } 
077A:  GOTO   0884 (RETURN)
....................  
.................... int getYear(void) { 
.................... 	return toYear(getReg(year_addr)); 
*
07A0:  MOVLW  06
07A2:  MOVWF  22
07A4:  RCALL  0318
07A6:  MOVFF  01,1C
07AA:  MOVFF  01,1D
07AE:  BRA    077E
07B0:  MOVF   01,W
.................... } 
07B2:  GOTO   08A4 (RETURN)
....................  
.................... short initDS1307(void) { 
*
03FC:  BSF    19.0
.................... 	int aux; 
.................... 	short ack = 1; 
....................  
.................... 	i2c_start(); 
03FE:  BSF    F94.4
0400:  MOVLW  1E
0402:  MOVWF  00
0404:  DECFSZ 00,F
0406:  BRA    0404
0408:  BSF    F94.3
040A:  MOVLW  1F
040C:  MOVWF  00
040E:  DECFSZ 00,F
0410:  BRA    040E
0412:  BCF    F8B.4
0414:  BCF    F94.4
0416:  MOVLW  1E
0418:  MOVWF  00
041A:  DECFSZ 00,F
041C:  BRA    041A
041E:  BCF    F8B.3
0420:  BCF    F94.3
.................... 	ack = i2c_write(DS1307); 
0422:  MOVLW  D0
0424:  MOVWF  24
0426:  RCALL  0244
0428:  MOVF   01,W
042A:  BCF    19.0
042C:  BTFSC  01.0
042E:  BSF    19.0
.................... 	i2c_stop(); 
0430:  BCF    F94.4
0432:  NOP   
0434:  BSF    F94.3
0436:  BTFSS  F82.3
0438:  BRA    0436
043A:  MOVLW  1E
043C:  MOVWF  00
043E:  DECFSZ 00,F
0440:  BRA    043E
0442:  BRA    0444
0444:  NOP   
0446:  BSF    F94.4
0448:  MOVLW  1E
044A:  MOVWF  00
044C:  DECFSZ 00,F
044E:  BRA    044C
....................  
.................... 	if (!ack) 
0450:  BTFSC  19.0
0452:  BRA    0464
.................... 		writeReg(sec_addr, getReg(sec_addr) & 0x7F); 
0454:  CLRF   22
0456:  RCALL  0318
0458:  MOVF   01,W
045A:  ANDLW  7F
045C:  MOVWF  1A
045E:  CLRF   1B
0460:  MOVWF  1C
0462:  RCALL  03A4
....................  
.................... 	return ack; 
0464:  MOVLW  00
0466:  BTFSC  19.0
0468:  MOVLW  01
046A:  MOVWF  01
.................... } 
046C:  GOTO   0A28 (RETURN)
....................  
.................... /*void getDS1307(struct cal *calendario) { 
....................  int aux; 
....................  
....................  i2c_start(); 
....................  i2c_write(DS1307); 
....................  i2c_write(sec_addr); 
....................  i2c_start(); 
....................  i2c_write(DS1307 + 1); 
....................  calendario->segundos = toSec(i2c_read()); 
....................  calendario->minutos = toSec(i2c_read()); 
....................  calendario->horas = toHour(i2c_read(), calendario->am_pm, calendario->_12h); 
....................  calendario->horas = bcdToDec(i2c_read() & 0x63); 
....................  calendario->dow = i2c_read() & 0x07; 
....................  calendario->dia = toDate(i2c_read()); 
....................  calendario->mes = toMonth(i2c_read()); 
....................  calendario->ano = toYear(i2c_read(0)); 
....................  i2c_stop(); 
....................  }*/ 
....................  
.................... void getDS1307(struct cal *calendario) { 
.................... 	calendario->segundos = getSec(); 
*
07B6:  MOVLW  01
07B8:  ADDWF  18,W
07BA:  MOVWF  01
07BC:  MOVLW  00
07BE:  ADDWFC 19,W
07C0:  MOVWF  03
07C2:  MOVFF  01,1A
07C6:  MOVWF  1B
07C8:  BRA    0630
07CA:  MOVFF  1B,FEA
07CE:  MOVFF  1A,FE9
07D2:  MOVFF  01,FEF
.................... 	calendario->minutos = getMin(); 
07D6:  MOVLW  02
07D8:  ADDWF  18,W
07DA:  MOVWF  01
07DC:  MOVLW  00
07DE:  ADDWFC 19,W
07E0:  MOVWF  03
07E2:  MOVFF  01,1A
07E6:  MOVWF  1B
07E8:  BRA    0644
07EA:  MOVFF  1B,FEA
07EE:  MOVFF  1A,FE9
07F2:  MOVFF  01,FEF
.................... 	calendario->horas = getHour(calendario.am_pm, calendario._12h); 
07F6:  MOVLW  03
07F8:  ADDWF  18,W
07FA:  MOVWF  01
07FC:  MOVLW  00
07FE:  ADDWFC 19,W
0800:  MOVWF  03
0802:  MOVFF  01,1A
0806:  MOVWF  1B
0808:  MOVLW  00
080A:  BTFSC  18.0
080C:  MOVLW  01
080E:  MOVWF  1C
0810:  MOVLW  00
0812:  BTFSC  18.1
0814:  MOVLW  01
0816:  MOVWF  1D
0818:  CLRF   1F
081A:  MOVFF  1C,1E
081E:  CLRF   21
0820:  MOVWF  20
0822:  BRA    06BC
0824:  MOVFF  1B,FEA
0828:  MOVFF  1A,FE9
082C:  MOVFF  01,FEF
.................... 	calendario->dow = getDayOfWeek(); 
0830:  MOVLW  04
0832:  ADDWF  18,W
0834:  MOVWF  01
0836:  MOVLW  00
0838:  ADDWFC 19,W
083A:  MOVWF  03
083C:  MOVFF  01,1A
0840:  MOVWF  1B
0842:  BRA    06FE
0844:  MOVFF  1B,FEA
0848:  MOVFF  1A,FE9
084C:  MOVFF  01,FEF
.................... 	calendario->dia = getDate(); 
0850:  MOVLW  05
0852:  ADDWF  18,W
0854:  MOVWF  01
0856:  MOVLW  00
0858:  ADDWFC 19,W
085A:  MOVWF  03
085C:  MOVFF  01,1A
0860:  MOVWF  1B
0862:  BRA    0730
0864:  MOVFF  1B,FEA
0868:  MOVFF  1A,FE9
086C:  MOVFF  01,FEF
.................... 	calendario->mes = getMonth(); 
0870:  MOVLW  06
0872:  ADDWF  18,W
0874:  MOVWF  01
0876:  MOVLW  00
0878:  ADDWFC 19,W
087A:  MOVWF  03
087C:  MOVFF  01,1A
0880:  MOVWF  1B
0882:  BRA    0768
0884:  MOVFF  1B,FEA
0888:  MOVFF  1A,FE9
088C:  MOVFF  01,FEF
.................... 	calendario->ano = getYear(); 
0890:  MOVLW  07
0892:  ADDWF  18,W
0894:  MOVWF  01
0896:  MOVLW  00
0898:  ADDWFC 19,W
089A:  MOVWF  03
089C:  MOVFF  01,1A
08A0:  MOVWF  1B
08A2:  BRA    07A0
08A4:  MOVFF  1B,FEA
08A8:  MOVFF  1A,FE9
08AC:  MOVFF  01,FEF
.................... } 
08B0:  GOTO   0A82 (RETURN)
....................  
.................... int toBcd(int in) { 
.................... 	int unidade, dezena; 
....................  
.................... 	dezena = in / 10; 
*
0498:  MOVFF  1C,1F
049C:  MOVLW  0A
049E:  MOVWF  20
04A0:  RCALL  0470
04A2:  MOVFF  01,1E
.................... 	unidade = in - dezena * 10; 
04A6:  MOVF   1E,W
04A8:  MULLW  0A
04AA:  MOVF   FF3,W
04AC:  SUBWF  1C,W
04AE:  MOVWF  1D
....................  
.................... 	return (dezena << 4) | unidade; 
04B0:  SWAPF  1E,W
04B2:  MOVWF  00
04B4:  MOVLW  F0
04B6:  ANDWF  00,F
04B8:  MOVF   00,W
04BA:  IORWF  1D,W
04BC:  MOVWF  01
.................... } 
04BE:  RETURN 0
....................  
.................... /*void setDS1307(struct cal *calen) { 
....................  int hor; 
....................  
....................  hor = ((int) calen->_12h << 5) | ((int) calen->am_pm << 5) 
....................  | toBcd(calen->horas & 0x3F); 
....................  
....................  i2c_start(); 
....................  i2c_write(DS1307); 
....................  i2c_write(0x02); //endereco registrador horas 
....................  i2c_write(hor); 
....................  i2c_stop(); 
....................  }*/ 
....................  
.................... /* 
....................  void setDS1307(struct cal *calen) { 
....................  int segun, minu, hor, diasemana, diames, mes2, ano2; 
....................  
....................  segun = toBcd(calen->segundos & 0x7F); 
....................  minu = toBcd(calen->minutos & 0x7F); 
....................  hor = ((int) calen->_12h << 5) | ((int) calen->am_pm << 5) 
....................  | toBcd(calen->horas & 0x3F); 
....................  diasemana = calen->dow & 0x07; 
....................  diames = toBcd(calen->dia & 0x3F); 
....................  mes2 = toBcd(calen->mes & 0x1F); 
....................  ano2 = toBcd(calen->ano); 
....................  
....................  i2c_start(); 
....................  i2c_write(DS1307); 
....................  i2c_write(sec_addr); 
....................  i2c_write(segun); 
....................  i2c_write(minu); 
....................  i2c_write(hor); 
....................  i2c_write(diasemana); 
....................  i2c_write(diames); 
....................  i2c_write(mes2); 
....................  i2c_write(ano2); 
....................  i2c_write(0); 
....................  i2c_stop(); 
....................  } 
....................  */ 
....................  
.................... void setDS1307(struct cal *calen) { 
....................  
.................... 	writeReg(sec_addr, toBcd(calen->segundos & 0x7F)); 
04C0:  MOVLW  01
04C2:  ADDWF  18,W
04C4:  MOVWF  FE9
04C6:  MOVLW  00
04C8:  ADDWFC 19,W
04CA:  MOVWF  FEA
04CC:  MOVF   FEF,W
04CE:  ANDLW  7F
04D0:  MOVWF  1A
04D2:  MOVWF  1C
04D4:  RCALL  0498
04D6:  MOVFF  01,1A
04DA:  CLRF   1B
04DC:  MOVFF  01,1C
04E0:  RCALL  03A4
.................... 	delay_ms(1); 
04E2:  MOVLW  01
04E4:  MOVWF  24
04E6:  RCALL  0120
....................  
.................... 	writeReg(min_addr, toBcd(calen->minutos & 0x7F)); 
04E8:  MOVLW  02
04EA:  ADDWF  18,W
04EC:  MOVWF  FE9
04EE:  MOVLW  00
04F0:  ADDWFC 19,W
04F2:  MOVWF  FEA
04F4:  MOVF   FEF,W
04F6:  ANDLW  7F
04F8:  MOVWF  1A
04FA:  MOVWF  1C
04FC:  RCALL  0498
04FE:  MOVFF  01,1A
0502:  MOVLW  01
0504:  MOVWF  1B
0506:  MOVFF  01,1C
050A:  RCALL  03A4
.................... 	delay_ms(1); 
050C:  MOVLW  01
050E:  MOVWF  24
0510:  RCALL  0120
....................  
.................... 	writeReg(hour_addr, 
.................... 			((int) calen->_12h << 5) | ((int) calen->am_pm << 5) 
.................... 					| toBcd(calen->horas & 0x3F)); 
0512:  MOVFF  18,FE9
0516:  MOVFF  19,FEA
051A:  SWAPF  FEF,W
051C:  MOVWF  1A
051E:  RLCF   1A,F
0520:  MOVLW  E0
0522:  ANDWF  1A,F
0524:  MOVFF  18,FE9
0528:  MOVFF  19,FEA
052C:  SWAPF  FEF,W
052E:  MOVWF  00
0530:  RLCF   00,F
0532:  MOVLW  E0
0534:  ANDWF  00,F
0536:  MOVF   00,W
0538:  IORWF  1A,F
053A:  MOVLW  03
053C:  ADDWF  18,W
053E:  MOVWF  FE9
0540:  MOVLW  00
0542:  ADDWFC 19,W
0544:  MOVWF  FEA
0546:  MOVF   FEF,W
0548:  ANDLW  3F
054A:  MOVWF  1B
054C:  MOVWF  1C
054E:  RCALL  0498
0550:  MOVF   01,W
0552:  IORWF  1A,F
0554:  MOVLW  02
0556:  MOVWF  1B
0558:  MOVFF  1A,1C
055C:  RCALL  03A4
.................... 	delay_ms(1); 
055E:  MOVLW  01
0560:  MOVWF  24
0562:  RCALL  0120
....................  
.................... 	writeReg(dow_addr, calen->dow & 0x07); 
0564:  MOVLW  04
0566:  ADDWF  18,W
0568:  MOVWF  FE9
056A:  MOVLW  00
056C:  ADDWFC 19,W
056E:  MOVWF  FEA
0570:  MOVF   FEF,W
0572:  ANDLW  07
0574:  MOVWF  1A
0576:  MOVLW  03
0578:  MOVWF  1B
057A:  MOVFF  1A,1C
057E:  RCALL  03A4
.................... 	delay_ms(1); 
0580:  MOVLW  01
0582:  MOVWF  24
0584:  RCALL  0120
....................  
.................... 	writeReg(date_addr, toBcd(calen->dia & 0x3F)); 
0586:  MOVLW  05
0588:  ADDWF  18,W
058A:  MOVWF  FE9
058C:  MOVLW  00
058E:  ADDWFC 19,W
0590:  MOVWF  FEA
0592:  MOVF   FEF,W
0594:  ANDLW  3F
0596:  MOVWF  1A
0598:  MOVWF  1C
059A:  RCALL  0498
059C:  MOVFF  01,1A
05A0:  MOVLW  04
05A2:  MOVWF  1B
05A4:  MOVFF  01,1C
05A8:  RCALL  03A4
.................... 	delay_ms(1); 
05AA:  MOVLW  01
05AC:  MOVWF  24
05AE:  RCALL  0120
....................  
.................... 	writeReg(month_addr, toBcd(calen->mes & 0x1F)); 
05B0:  MOVLW  06
05B2:  ADDWF  18,W
05B4:  MOVWF  FE9
05B6:  MOVLW  00
05B8:  ADDWFC 19,W
05BA:  MOVWF  FEA
05BC:  MOVF   FEF,W
05BE:  ANDLW  1F
05C0:  MOVWF  1A
05C2:  MOVWF  1C
05C4:  RCALL  0498
05C6:  MOVFF  01,1A
05CA:  MOVLW  05
05CC:  MOVWF  1B
05CE:  MOVFF  01,1C
05D2:  RCALL  03A4
.................... 	delay_ms(1); 
05D4:  MOVLW  01
05D6:  MOVWF  24
05D8:  RCALL  0120
....................  
.................... 	writeReg(year_addr, toBcd(calen->ano)); 
05DA:  MOVLW  07
05DC:  ADDWF  18,W
05DE:  MOVWF  FE9
05E0:  MOVLW  00
05E2:  ADDWFC 19,W
05E4:  MOVWF  FEA
05E6:  MOVFF  FEF,1A
05EA:  MOVFF  1A,1C
05EE:  RCALL  0498
05F0:  MOVFF  01,1A
05F4:  MOVLW  06
05F6:  MOVWF  1B
05F8:  MOVFF  01,1C
05FC:  RCALL  03A4
.................... 	delay_ms(1); 
05FE:  MOVLW  01
0600:  MOVWF  24
0602:  RCALL  0120
....................  
.................... 	writeReg(0x07, 0x00); 
0604:  MOVLW  07
0606:  MOVWF  1B
0608:  CLRF   1C
060A:  RCALL  03A4
.................... } 
060C:  GOTO   0A62 (RETURN)
....................  
.................... #endif /* CALENDARIO_H_ */ 
....................  
.................... #include"lcd_4b.c" 
.................... #define rs PIN_E0 
.................... #define en PIN_E1 
.................... #define d4 PIN_D4 
.................... #define d5 PIN_D5 
.................... #define d6 PIN_D6 
.................... #define d7 PIN_D7 
....................  
.................... void lcd_cmd(int cmd) { 
.................... 	output_bit(d4, bit_test(cmd, 0)); 
*
0148:  BTFSC  25.0
014A:  BRA    0150
014C:  BCF    F8C.4
014E:  BRA    0152
0150:  BSF    F8C.4
0152:  BCF    F95.4
.................... 	output_bit(d5, bit_test(cmd, 1)); 
0154:  BTFSC  25.1
0156:  BRA    015C
0158:  BCF    F8C.5
015A:  BRA    015E
015C:  BSF    F8C.5
015E:  BCF    F95.5
.................... 	output_bit(d6, bit_test(cmd, 2)); 
0160:  BTFSC  25.2
0162:  BRA    0168
0164:  BCF    F8C.6
0166:  BRA    016A
0168:  BSF    F8C.6
016A:  BCF    F95.6
.................... 	output_bit(d7, bit_test(cmd, 3)); 
016C:  BTFSC  25.3
016E:  BRA    0174
0170:  BCF    F8C.7
0172:  BRA    0176
0174:  BSF    F8C.7
0176:  BCF    F95.7
.................... 	output_high(en); 
0178:  BCF    F96.1
017A:  BSF    F8D.1
.................... 	output_low(en); 
017C:  BCF    F96.1
017E:  BCF    F8D.1
.................... } 
0180:  RETURN 0
....................  
.................... void lcd_envia_byte(short endereco, int dado) { 
.................... 	output_low(rs); 
*
01A2:  BCF    F96.0
01A4:  BCF    F8D.0
.................... 	output_bit(rs, endereco); 
01A6:  MOVF   22,F
01A8:  BNZ   01AE
01AA:  BCF    F8D.0
01AC:  BRA    01B0
01AE:  BSF    F8D.0
01B0:  BCF    F96.0
.................... 	delay_us(100); 
01B2:  MOVLW  64
01B4:  MOVWF  24
01B6:  BRA    0182
.................... 	output_low(en); 
01B8:  BCF    F96.1
01BA:  BCF    F8D.1
.................... 	lcd_cmd(dado >> 4); 
01BC:  SWAPF  23,W
01BE:  MOVWF  24
01C0:  MOVLW  0F
01C2:  ANDWF  24,F
01C4:  MOVFF  24,25
01C8:  RCALL  0148
.................... 	lcd_cmd(dado & 0x0f); 
01CA:  MOVF   23,W
01CC:  ANDLW  0F
01CE:  MOVWF  24
01D0:  MOVWF  25
01D2:  RCALL  0148
.................... 	delay_ms(1); 
01D4:  MOVLW  01
01D6:  MOVWF  24
01D8:  RCALL  0120
.................... } 
01DA:  RETURN 0
....................  
.................... void lcd_pos_xy(int x, int y) { 
.................... 	int endereco; 
.................... 	if (y != 1) 
*
08B4:  DECFSZ 20,W
08B6:  BRA    08BA
08B8:  BRA    08C0
.................... 		endereco = 0xc0; 
08BA:  MOVLW  C0
08BC:  MOVWF  21
.................... 	else 
08BE:  BRA    08C4
.................... 		endereco = 0x80; 
08C0:  MOVLW  80
08C2:  MOVWF  21
.................... 	endereco += x - 1; 
08C4:  MOVLW  01
08C6:  SUBWF  1F,W
08C8:  ADDWF  21,F
.................... 	lcd_envia_byte(0, endereco); 
08CA:  CLRF   22
08CC:  MOVFF  21,23
08D0:  RCALL  01A2
.................... } 
08D2:  GOTO   091A (RETURN)
....................  
.................... void lcd(char c) { 
.................... 	switch (c) { 
08D6:  MOVF   1E,W
08D8:  XORLW  0C
08DA:  BZ    08EA
08DC:  XORLW  06
08DE:  BZ    08FA
08E0:  XORLW  07
08E2:  BZ    08FA
08E4:  XORLW  05
08E6:  BZ    0906
08E8:  BRA    0910
.................... 	case '\f': 
.................... 		lcd_envia_byte(0, 1);     // 0,1 
08EA:  CLRF   22
08EC:  MOVLW  01
08EE:  MOVWF  23
08F0:  RCALL  01A2
.................... 		delay_ms(2); 
08F2:  MOVLW  02
08F4:  MOVWF  24
08F6:  RCALL  0120
.................... 		break; 
08F8:  BRA    091A
.................... 	case '\n': 
.................... 	case '\r': 
.................... 		lcd_pos_xy(1, 2);      // 1,2  COLUNA,LINHA 
08FA:  MOVLW  01
08FC:  MOVWF  1F
08FE:  MOVLW  02
0900:  MOVWF  20
0902:  BRA    08B4
.................... 		break; 
0904:  BRA    091A
.................... 	case '\b': 
.................... 		lcd_envia_byte(0, 0x10); 
0906:  CLRF   22
0908:  MOVLW  10
090A:  MOVWF  23
090C:  RCALL  01A2
.................... 		break; 
090E:  BRA    091A
.................... 	default: 
.................... 		lcd_envia_byte(1, c); 
0910:  MOVLW  01
0912:  MOVWF  22
0914:  MOVFF  1E,23
0918:  RCALL  01A2
.................... 		break; 
.................... 	} 
.................... } 
091A:  RETURN 0
....................  
.................... void lcd_init() { 
....................  
.................... 	int conta; 
....................  
.................... 	output_low(rs); 
*
01DC:  BCF    F96.0
01DE:  BCF    F8D.0
.................... 	output_low(en); 
01E0:  BCF    F96.1
01E2:  BCF    F8D.1
.................... 	output_low(d4); 
01E4:  BCF    F95.4
01E6:  BCF    F8C.4
.................... 	output_low(d5); 
01E8:  BCF    F95.5
01EA:  BCF    F8C.5
.................... 	output_low(d6); 
01EC:  BCF    F95.6
01EE:  BCF    F8C.6
.................... 	output_low(d7); 
01F0:  BCF    F95.7
01F2:  BCF    F8C.7
....................  
.................... 	delay_ms(15); 
01F4:  MOVLW  0F
01F6:  MOVWF  24
01F8:  RCALL  0120
....................  
.................... 	for (conta = 1; conta <= 3; conta++) { 
01FA:  MOVLW  01
01FC:  MOVWF  18
01FE:  MOVF   18,W
0200:  SUBLW  03
0202:  BNC   0214
.................... 		lcd_cmd(0x03); 
0204:  MOVLW  03
0206:  MOVWF  25
0208:  RCALL  0148
.................... 		delay_ms(5); 
020A:  MOVLW  05
020C:  MOVWF  24
020E:  RCALL  0120
.................... 	} 
0210:  INCF   18,F
0212:  BRA    01FE
.................... 	lcd_cmd(0x02);           //escreve comando para interface de 4 vias de dados 
0214:  MOVLW  02
0216:  MOVWF  25
0218:  RCALL  0148
.................... 	lcd_envia_byte(0, 0x28); //escreve comando informando lcd de 2 linhas (5x7) em 4bits 
021A:  CLRF   22
021C:  MOVLW  28
021E:  MOVWF  23
0220:  RCALL  01A2
.................... 	lcd_envia_byte(0, 0x0c); //escreve comando para limpar todo o display 
0222:  CLRF   22
0224:  MOVLW  0C
0226:  MOVWF  23
0228:  RCALL  01A2
.................... 	lcd_envia_byte(0, 0x01); //escreve comando para ligar o display **com cursor piscante 
022A:  CLRF   22
022C:  MOVLW  01
022E:  MOVWF  23
0230:  RCALL  01A2
.................... 	lcd_envia_byte(0, 0x06); //escreve comando para incrementar automaticamente á direita 
0232:  CLRF   22
0234:  MOVLW  06
0236:  MOVWF  23
0238:  RCALL  01A2
.................... 	delay_ms(5); 
023A:  MOVLW  05
023C:  MOVWF  24
023E:  RCALL  0120
.................... } 
0240:  GOTO   0A1E (RETURN)
....................  
....................  
....................  
.................... struct cal calendario; 
....................  
.................... int main(void) { 
*
0A0A:  CLRF   FF8
0A0C:  BCF    FD0.7
0A0E:  CLRF   FEA
0A10:  CLRF   FE9
0A12:  BSF    FC1.0
0A14:  BSF    FC1.1
0A16:  BSF    FC1.2
0A18:  BCF    FC1.3
....................  
.................... 	int formato[4], AM_PM[3], diaSemana[4], aux; 
....................  
.................... 	lcd_init(); 
0A1A:  GOTO   01DC
.................... 	delay_ms(100); 
0A1E:  MOVLW  64
0A20:  MOVWF  24
0A22:  CALL   0120
.................... 	initDS1307(); 
0A26:  BRA    03FC
....................  
.................... 	while (TRUE) { 
....................  
.................... 		if (!input(PIN_B0)) { 
0A28:  BSF    F93.0
0A2A:  BTFSC  F81.0
0A2C:  BRA    0A72
.................... 			delay_ms(100); 
0A2E:  MOVLW  64
0A30:  MOVWF  24
0A32:  CALL   0120
.................... 			if (!input(PIN_B0)) { 
0A36:  BSF    F93.0
0A38:  BTFSC  F81.0
0A3A:  BRA    0A72
.................... 				calendario.segundos = 0; 
0A3C:  CLRF   05
.................... 				calendario.minutos = 47; 
0A3E:  MOVLW  2F
0A40:  MOVWF  06
.................... 				calendario.horas = 14; 
0A42:  MOVLW  0E
0A44:  MOVWF  07
.................... 				calendario.dow = seg; 
0A46:  MOVLW  02
0A48:  MOVWF  08
.................... 				calendario.dia = 29; 
0A4A:  MOVLW  1D
0A4C:  MOVWF  09
.................... 				calendario.mes = 7; 
0A4E:  MOVLW  07
0A50:  MOVWF  0A
.................... 				calendario.ano = 13; 
0A52:  MOVLW  0D
0A54:  MOVWF  0B
.................... 				calendario._12h = 0; 
0A56:  BCF    04.1
.................... 				calendario.am_pm = 0; 
0A58:  BCF    04.0
.................... 				setDS1307(&calendario); 
0A5A:  CLRF   19
0A5C:  MOVLW  04
0A5E:  MOVWF  18
0A60:  BRA    04C0
.................... 				delay_ms(500); 
0A62:  MOVLW  02
0A64:  MOVWF  18
0A66:  MOVLW  FA
0A68:  MOVWF  24
0A6A:  CALL   0120
0A6E:  DECFSZ 18,F
0A70:  BRA    0A66
.................... 			} 
.................... 		} 
....................  
.................... 		delay_ms(100); 
0A72:  MOVLW  64
0A74:  MOVWF  24
0A76:  CALL   0120
.................... 		getDS1307(&calendario); 
0A7A:  CLRF   19
0A7C:  MOVLW  04
0A7E:  MOVWF  18
0A80:  BRA    07B6
....................  
.................... 		if (calendario._12h) { 
0A82:  BTFSS  04.1
0A84:  BRA    0AD6
.................... 			strcpy(formato, "12h"); 
0A86:  CLRF   FEA
0A88:  MOVLW  0C
0A8A:  MOVWF  FE9
0A8C:  MOVLW  00
0A8E:  CALL   0004
0A92:  TBLRD*-
0A94:  TBLRD*+
0A96:  MOVF   FF5,W
0A98:  MOVWF  FEE
0A9A:  IORLW  00
0A9C:  BNZ   0A94
.................... 			if (calendario.am_pm) 
0A9E:  BTFSS  04.0
0AA0:  BRA    0ABC
.................... 				strcpy(AM_PM, "AM"); 
0AA2:  CLRF   FEA
0AA4:  MOVLW  10
0AA6:  MOVWF  FE9
0AA8:  MOVLW  00
0AAA:  CALL   0018
0AAE:  TBLRD*-
0AB0:  TBLRD*+
0AB2:  MOVF   FF5,W
0AB4:  MOVWF  FEE
0AB6:  IORLW  00
0AB8:  BNZ   0AB0
.................... 			else 
0ABA:  BRA    0AD4
.................... 				strcpy(AM_PM, "PM"); 
0ABC:  CLRF   FEA
0ABE:  MOVLW  10
0AC0:  MOVWF  FE9
0AC2:  MOVLW  00
0AC4:  CALL   002C
0AC8:  TBLRD*-
0ACA:  TBLRD*+
0ACC:  MOVF   FF5,W
0ACE:  MOVWF  FEE
0AD0:  IORLW  00
0AD2:  BNZ   0ACA
.................... 		} else { 
0AD4:  BRA    0B06
.................... 			strcpy(formato, "24h"); 
0AD6:  CLRF   FEA
0AD8:  MOVLW  0C
0ADA:  MOVWF  FE9
0ADC:  MOVLW  00
0ADE:  CALL   0040
0AE2:  TBLRD*-
0AE4:  TBLRD*+
0AE6:  MOVF   FF5,W
0AE8:  MOVWF  FEE
0AEA:  IORLW  00
0AEC:  BNZ   0AE4
.................... 			strcpy(AM_PM, "  "); 
0AEE:  CLRF   FEA
0AF0:  MOVLW  10
0AF2:  MOVWF  FE9
0AF4:  MOVLW  00
0AF6:  CALL   0054
0AFA:  TBLRD*-
0AFC:  TBLRD*+
0AFE:  MOVF   FF5,W
0B00:  MOVWF  FEE
0B02:  IORLW  00
0B04:  BNZ   0AFC
.................... 		} 
.................... 		AM_PM[2] = '\0'; 
0B06:  CLRF   12
.................... 		formato[3] = '\0'; 
0B08:  CLRF   0F
....................  
.................... 		switch (calendario.dow) { 
0B0A:  MOVF   08,W
0B0C:  XORLW  01
0B0E:  BZ    0B2A
0B10:  XORLW  03
0B12:  BZ    0B44
0B14:  XORLW  01
0B16:  BZ    0B5E
0B18:  XORLW  07
0B1A:  BZ    0B78
0B1C:  XORLW  01
0B1E:  BZ    0B92
0B20:  XORLW  03
0B22:  BZ    0BAC
0B24:  XORLW  01
0B26:  BZ    0BC6
0B28:  BRA    0BE0
.................... 		case dom: 
.................... 			strcpy(diaSemana, "DOM"); 
0B2A:  CLRF   FEA
0B2C:  MOVLW  13
0B2E:  MOVWF  FE9
0B30:  MOVLW  00
0B32:  CALL   0068
0B36:  TBLRD*-
0B38:  TBLRD*+
0B3A:  MOVF   FF5,W
0B3C:  MOVWF  FEE
0B3E:  IORLW  00
0B40:  BNZ   0B38
.................... 			break; 
0B42:  BRA    0BF8
.................... 		case seg: 
.................... 			strcpy(diaSemana, "SEG"); 
0B44:  CLRF   FEA
0B46:  MOVLW  13
0B48:  MOVWF  FE9
0B4A:  MOVLW  00
0B4C:  CALL   007C
0B50:  TBLRD*-
0B52:  TBLRD*+
0B54:  MOVF   FF5,W
0B56:  MOVWF  FEE
0B58:  IORLW  00
0B5A:  BNZ   0B52
.................... 			break; 
0B5C:  BRA    0BF8
.................... 		case ter: 
.................... 			strcpy(diaSemana, "TER"); 
0B5E:  CLRF   FEA
0B60:  MOVLW  13
0B62:  MOVWF  FE9
0B64:  MOVLW  00
0B66:  CALL   0090
0B6A:  TBLRD*-
0B6C:  TBLRD*+
0B6E:  MOVF   FF5,W
0B70:  MOVWF  FEE
0B72:  IORLW  00
0B74:  BNZ   0B6C
.................... 			break; 
0B76:  BRA    0BF8
.................... 		case qua: 
.................... 			strcpy(diaSemana, "QUA"); 
0B78:  CLRF   FEA
0B7A:  MOVLW  13
0B7C:  MOVWF  FE9
0B7E:  MOVLW  00
0B80:  CALL   00A4
0B84:  TBLRD*-
0B86:  TBLRD*+
0B88:  MOVF   FF5,W
0B8A:  MOVWF  FEE
0B8C:  IORLW  00
0B8E:  BNZ   0B86
.................... 			break; 
0B90:  BRA    0BF8
.................... 		case qui: 
.................... 			strcpy(diaSemana, "QUI"); 
0B92:  CLRF   FEA
0B94:  MOVLW  13
0B96:  MOVWF  FE9
0B98:  MOVLW  00
0B9A:  CALL   00B8
0B9E:  TBLRD*-
0BA0:  TBLRD*+
0BA2:  MOVF   FF5,W
0BA4:  MOVWF  FEE
0BA6:  IORLW  00
0BA8:  BNZ   0BA0
.................... 			break; 
0BAA:  BRA    0BF8
.................... 		case sex: 
.................... 			strcpy(diaSemana, "SEX"); 
0BAC:  CLRF   FEA
0BAE:  MOVLW  13
0BB0:  MOVWF  FE9
0BB2:  MOVLW  00
0BB4:  CALL   00CC
0BB8:  TBLRD*-
0BBA:  TBLRD*+
0BBC:  MOVF   FF5,W
0BBE:  MOVWF  FEE
0BC0:  IORLW  00
0BC2:  BNZ   0BBA
.................... 			break; 
0BC4:  BRA    0BF8
.................... 		case sab: 
.................... 			strcpy(diaSemana, "SAB"); 
0BC6:  CLRF   FEA
0BC8:  MOVLW  13
0BCA:  MOVWF  FE9
0BCC:  MOVLW  00
0BCE:  CALL   00E0
0BD2:  TBLRD*-
0BD4:  TBLRD*+
0BD6:  MOVF   FF5,W
0BD8:  MOVWF  FEE
0BDA:  IORLW  00
0BDC:  BNZ   0BD4
.................... 			break; 
0BDE:  BRA    0BF8
.................... 		default: 
.................... 			strcpy(diaSemana, "ERR"); 
0BE0:  CLRF   FEA
0BE2:  MOVLW  13
0BE4:  MOVWF  FE9
0BE6:  MOVLW  00
0BE8:  CALL   00F4
0BEC:  TBLRD*-
0BEE:  TBLRD*+
0BF0:  MOVF   FF5,W
0BF2:  MOVWF  FEE
0BF4:  IORLW  00
0BF6:  BNZ   0BEE
.................... 			break; 
.................... 		} 
.................... 		diaSemana[3] = '\0'; 
0BF8:  CLRF   16
....................  
.................... 		if (aux != calendario.segundos) { 
0BFA:  MOVF   05,W
0BFC:  SUBWF  17,W
0BFE:  BZ    0C9C
.................... 			aux = calendario.segundos; 
0C00:  MOVFF  05,17
.................... 			printf(lcd, "\f%s %s  %02d:%02d:%02d", formato, AM_PM, 
.................... 					calendario.horas, calendario.minutos, calendario.segundos); 
0C04:  MOVLW  0C
0C06:  MOVWF  1E
0C08:  RCALL  08D6
0C0A:  CLRF   FEA
0C0C:  MOVLW  0C
0C0E:  MOVWF  FE9
0C10:  RCALL  091C
0C12:  MOVLW  20
0C14:  MOVWF  1E
0C16:  RCALL  08D6
0C18:  CLRF   FEA
0C1A:  MOVLW  10
0C1C:  MOVWF  FE9
0C1E:  RCALL  091C
0C20:  MOVLW  20
0C22:  MOVWF  1E
0C24:  RCALL  08D6
0C26:  MOVLW  20
0C28:  MOVWF  1E
0C2A:  RCALL  08D6
0C2C:  MOVFF  07,18
0C30:  MOVLW  01
0C32:  MOVWF  19
0C34:  RCALL  0940
0C36:  MOVLW  3A
0C38:  MOVWF  1E
0C3A:  RCALL  08D6
0C3C:  MOVFF  06,18
0C40:  MOVLW  01
0C42:  MOVWF  19
0C44:  RCALL  0940
0C46:  MOVLW  3A
0C48:  MOVWF  1E
0C4A:  RCALL  08D6
0C4C:  MOVFF  05,18
0C50:  MOVLW  01
0C52:  MOVWF  19
0C54:  RCALL  0940
.................... 			printf(lcd, "\n%s     %02d/%02d/%02d", diaSemana, calendario.dia, 
.................... 					calendario.mes, calendario.ano); 
0C56:  MOVLW  0A
0C58:  MOVWF  1E
0C5A:  RCALL  08D6
0C5C:  CLRF   FEA
0C5E:  MOVLW  13
0C60:  MOVWF  FE9
0C62:  RCALL  091C
0C64:  MOVLW  0B
0C66:  MOVWF  FF6
0C68:  MOVLW  01
0C6A:  MOVWF  FF7
0C6C:  MOVLW  05
0C6E:  MOVWF  18
0C70:  BRA    09EA
0C72:  MOVFF  09,18
0C76:  MOVLW  01
0C78:  MOVWF  19
0C7A:  RCALL  0940
0C7C:  MOVLW  2F
0C7E:  MOVWF  1E
0C80:  RCALL  08D6
0C82:  MOVFF  0A,18
0C86:  MOVLW  01
0C88:  MOVWF  19
0C8A:  RCALL  0940
0C8C:  MOVLW  2F
0C8E:  MOVWF  1E
0C90:  RCALL  08D6
0C92:  MOVFF  0B,18
0C96:  MOVLW  01
0C98:  MOVWF  19
0C9A:  RCALL  0940
.................... 		} 
.................... 	} //infinite loop 
0C9C:  BRA    0A28
.................... } //main 
0C9E:  SLEEP 

Configuration Fuses:
   Word  1: 2600   H4 NOOSCSEN
   Word  2: 0E0E   PUT BROWNOUT BORV20 NOWDT WDT128
   Word  3: 0100   CCP2C1
   Word  4: 0081   STVREN NOLVP NODEBUG
   Word  5: C00F   NOPROTECT NOCPB NOCPD
   Word  6: E00F   NOWRT NOWRTC NOWRTB NOWRTD
   Word  7: 400F   NOEBTR NOEBTRB
